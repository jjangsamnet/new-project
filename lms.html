<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduPlatform - 온라인 학습 관리 시스템</title>
    <link rel="stylesheet" href="lms-styles.css">
</head>
<body>
    <!-- 헤더 -->
    <header class="header">
        <div class="container">
            <div class="nav-brand">
                <h1 class="site-title" onclick="showSection('home')" style="cursor: pointer;">EduPlatform</h1>
            </div>
            <nav class="nav-menu">
                <ul>
                    <li><a href="#home" class="nav-link active">홈</a></li>
                    <li><a href="#courses" class="nav-link">강좌</a></li>
                    <li><a href="#my-courses" class="nav-link" id="my-courses-nav" style="display: none;">내 강좌</a></li>
                    <li><a href="#contact" class="nav-link">문의</a></li>
                </ul>
            </nav>
            <div class="auth-buttons" id="auth-buttons">
                <button class="btn btn-outline" onclick="showLogin()" id="login-btn">로그인</button>
                <button class="btn btn-primary" onclick="showRegister()" id="register-btn">회원가입</button>
            </div>
            <div class="user-info" id="user-info" style="display: none;">
                <span class="welcome-text">안녕하세요, <span id="user-name-display"></span>님!</span>
                <button class="btn btn-outline" onclick="showUserProfileModal()">회원정보</button>
                <button class="btn btn-outline" onclick="logout()">로그아웃</button>
            </div>
        </div>
    </header>

    <!-- 메인 콘텐츠 -->
    <main>
        <!-- 홈 섹션 -->
        <section id="home" class="hero">
            <div class="container">
                <div class="hero-content">
                    <h2 class="hero-title">온라인으로 배우는 새로운 경험</h2>
                    <p class="hero-subtitle">전문 강사진과 함께하는 체계적인 온라인 교육 플랫폼</p>
                    <button class="btn btn-primary btn-large hero-button" onclick="showSection('courses')">강좌 둘러보기</button>
                </div>
                <div class="hero-image">
                    <div class="placeholder-image">
                        <span>온라인 학습 이미지</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- 강좌 섹션 -->
        <section id="courses" class="courses-section">
            <div class="container">
                <h2 class="section-title">강좌</h2>

                <!-- 검색 및 필터 -->
                <div class="course-filters">
                    <input type="text" id="course-search-input" class="search-input" placeholder="강좌명, 강사명으로 검색...">
                    <select id="course-category-filter" class="filter-select">
                        <option value="">모든 카테고리</option>
                        <option value="프로그래밍">프로그래밍</option>
                        <option value="디자인">디자인</option>
                        <option value="비즈니스">비즈니스</option>
                        <option value="언어">언어</option>
                        <option value="기타">기타</option>
                    </select>
                    <select id="course-level-filter" class="filter-select">
                        <option value="">모든 난이도</option>
                        <option value="초급">초급</option>
                        <option value="중급">중급</option>
                        <option value="고급">고급</option>
                    </select>
                </div>

                <div class="courses-grid" id="courses-grid">
                    <!-- 강좌 카드들이 동적으로 생성됩니다 -->
                </div>
            </div>
        </section>

        <!-- 내 강좌 섹션 -->
        <section id="my-courses" class="my-courses-section">
            <div class="container">
                <h2 class="section-title">내 강좌</h2>
                <div class="my-courses-content">
                    <div class="enrolled-courses" id="enrolled-courses">
                        <!-- 수강중인 강좌들이 여기에 표시됩니다 -->
                    </div>
                    <div class="empty-courses" id="empty-courses" style="display: none;">
                        <div class="empty-state">
                            <div class="empty-icon">📚</div>
                            <h3>수강중인 강좌가 없습니다</h3>
                            <p>다양한 강좌를 살펴보고 학습을 시작해보세요!</p>
                            <button class="btn btn-primary" onclick="showSection('courses')">강좌 둘러보기</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 문의 섹션 -->
        <section id="contact" class="contact-section">
            <div class="container">
                <h2 class="section-title">문의하기</h2>
                <div class="contact-content">
                    <div class="contact-info">
                        <h3>연락처 정보</h3>
                        <div class="contact-item">
                            <strong>이메일:</strong> <span class="contact-email">info@eduplatform.com</span>
                        </div>
                        <div class="contact-item">
                            <strong>전화:</strong> <span class="contact-phone">02-1234-5678</span>
                        </div>
                        <div class="contact-item">
                            <strong>운영시간:</strong> 평일 09:00 - 18:00
                        </div>
                    </div>
                    <form class="contact-form">
                        <div class="form-group">
                            <input type="text" placeholder="이름" required>
                        </div>
                        <div class="form-group">
                            <input type="email" placeholder="이메일" required>
                        </div>
                        <div class="form-group">
                            <textarea placeholder="문의 내용" rows="4" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">문의 보내기</button>
                    </form>
                </div>
            </div>
        </section>
    </main>

    <!-- 로그인 모달 -->
    <div id="login-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>로그인</h2>
                <span class="close" onclick="closeModal('login-modal')">&times;</span>
            </div>
            <form class="auth-form" id="login-form">
                <div class="form-group">
                    <input type="email" placeholder="이메일" required>
                </div>
                <div class="form-group">
                    <input type="password" placeholder="비밀번호" required>
                </div>
                <button type="submit" class="btn btn-primary btn-full">로그인</button>
                <div class="auth-links">
                    <a href="#" onclick="showPasswordReset()">비밀번호를 잊으셨나요?</a>
                    <a href="#" onclick="showRegister()">계정이 없으신가요? 회원가입</a>
                </div>
            </form>
        </div>
    </div>

    <!-- 회원가입 모달 -->
    <div id="register-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>회원가입</h2>
                <span class="close" onclick="closeModal('register-modal')">&times;</span>
            </div>
            <form class="auth-form" id="register-form">
                <div class="form-group">
                    <input type="text" placeholder="이름" required>
                </div>
                <div class="form-group">
                    <input type="email" placeholder="이메일" required>
                </div>
                <div class="form-group">
                    <input type="password" placeholder="비밀번호" required>
                </div>
                <div class="form-group">
                    <input type="password" placeholder="비밀번호 확인" required>
                </div>
                <div class="form-group">
                    <input type="tel" placeholder="휴대폰 번호 (010-0000-0000)" pattern="010-\d{4}-\d{4}" required>
                </div>
                <div class="form-group">
                    <select required>
                        <option value="">시/도 선택</option>
                        <option value="서울">서울</option>
                        <option value="경기">경기</option>
                        <option value="인천">인천</option>
                        <option value="부산">부산</option>
                        <option value="대구">대구</option>
                        <option value="광주">광주</option>
                        <option value="대전">대전</option>
                        <option value="울산">울산</option>
                        <option value="세종">세종</option>
                        <option value="강원">강원</option>
                        <option value="충북">충북</option>
                        <option value="충남">충남</option>
                        <option value="전북">전북</option>
                        <option value="전남">전남</option>
                        <option value="경북">경북</option>
                        <option value="경남">경남</option>
                        <option value="제주">제주</option>
                    </select>
                </div>
                <div class="form-group">
                    <input type="text" placeholder="소속 (학교, 회사 등)" required>
                </div>
                <div class="form-group checkbox-group">
                    <label>
                        <input type="checkbox" id="terms-checkbox" required>
                        <span class="checkmark"></span>
                        <a href="#" onclick="showTermsModal(event)" style="color: #007bff; text-decoration: underline;">이용약관</a> 및 <a href="#" onclick="showPrivacyPolicyModal(event)" style="color: #007bff; text-decoration: underline;">개인정보처리방침</a>에 동의합니다.
                    </label>
                </div>
                <div class="form-group checkbox-group">
                    <label>
                        <input type="checkbox" id="privacy-checkbox" required>
                        <span class="checkmark"></span>
                        <a href="#" onclick="showPrivacyConsentModal(event)" style="color: #007bff; text-decoration: underline;">개인정보 수집 및 이용</a>에 동의합니다. (필수)
                    </label>
                </div>
                <button type="submit" class="btn btn-primary btn-full">회원가입</button>
                <div class="auth-links">
                    <a href="#" onclick="showLogin()">이미 계정이 있으신가요? 로그인</a>
                </div>
            </form>
        </div>
    </div>

    <!-- 비밀번호 재설정 모달 -->
    <div id="password-reset-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>비밀번호 재설정</h2>
                <span class="close" onclick="closeModal('password-reset-modal')">&times;</span>
            </div>
            <form class="auth-form" id="password-reset-form">
                <div class="form-group">
                    <label for="reset-email">이메일 주소</label>
                    <input type="email" id="reset-email" placeholder="가입하신 이메일을 입력하세요" required>
                </div>
                <div class="reset-info">
                    <p>📧 입력하신 이메일로 비밀번호 재설정 링크를 보내드립니다.</p>
                    <p>메일이 오지 않는다면 스팸함도 확인해 주세요.</p>
                </div>
                <button type="submit" class="btn btn-primary btn-full">재설정 링크 전송</button>
                <div class="auth-links">
                    <a href="#" onclick="showLogin()">로그인으로 돌아가기</a>
                    <a href="#" onclick="showRegister()">계정이 없으신가요? 회원가입</a>
                </div>
            </form>

            <!-- 성공 메시지 (초기에는 숨김) -->
            <div class="reset-success" id="reset-success" style="display: none;">
                <div class="success-icon">✅</div>
                <h3>재설정 링크를 전송했습니다!</h3>
                <p>입력하신 이메일 주소로 비밀번호 재설정 링크를 보내드렸습니다.</p>
                <p>메일을 확인하고 링크를 클릭하여 새 비밀번호를 설정하세요.</p>
                <button class="btn btn-outline" onclick="closeModal('password-reset-modal')">확인</button>
            </div>
        </div>
    </div>

    <!-- 회원정보 수정 모달 -->
    <div id="user-profile-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>회원정보 수정</h2>
                <span class="close" onclick="closeModal('user-profile-modal')">&times;</span>
            </div>
            <form class="auth-form" id="user-profile-form">
                <div class="form-group">
                    <label for="profile-name">이름</label>
                    <input type="text" id="profile-name" placeholder="이름" required>
                </div>
                <div class="form-group">
                    <label for="profile-email">이메일</label>
                    <input type="email" id="profile-email" placeholder="이메일" disabled>
                    <small style="color: #888;">이메일은 변경할 수 없습니다.</small>
                </div>
                <div class="form-group">
                    <label for="profile-phone">전화번호</label>
                    <input type="tel" id="profile-phone" placeholder="010-0000-0000">
                </div>
                <div class="form-group">
                    <label for="profile-affiliation">소속</label>
                    <input type="text" id="profile-affiliation" placeholder="소속 (예: 대화초등학교)">
                </div>
                <div class="form-group">
                    <label for="profile-region">지역</label>
                    <select id="profile-region">
                        <option value="">지역 선택</option>
                        <option value="서울">서울</option>
                        <option value="경기">경기</option>
                        <option value="인천">인천</option>
                        <option value="부산">부산</option>
                        <option value="대구">대구</option>
                        <option value="광주">광주</option>
                        <option value="대전">대전</option>
                        <option value="울산">울산</option>
                        <option value="세종">세종</option>
                        <option value="강원">강원</option>
                        <option value="충북">충북</option>
                        <option value="충남">충남</option>
                        <option value="전북">전북</option>
                        <option value="전남">전남</option>
                        <option value="경북">경북</option>
                        <option value="경남">경남</option>
                        <option value="제주">제주</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary btn-full">저장</button>
                <button type="button" class="btn btn-outline btn-full" onclick="closeModal('user-profile-modal')">취소</button>
            </form>
        </div>
    </div>

    <!-- 이용약관 모달 -->
    <div id="terms-modal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>이용약관</h2>
                <span class="close" onclick="closeModal('terms-modal')">&times;</span>
            </div>
            <div class="modal-body" style="max-height: 500px; overflow-y: auto; padding: 20px; line-height: 1.6;">
                <h3>제1조 (목적)</h3>
                <p>본 약관은 온라인 교육 플랫폼(이하 "서비스")의 이용과 관련하여 회사와 회원 간의 권리, 의무 및 책임사항을 규정함을 목적으로 합니다.</p>

                <h3>제2조 (정의)</h3>
                <p>1. "서비스"란 회사가 제공하는 온라인 교육 콘텐츠 및 관련 서비스를 의미합니다.</p>
                <p>2. "회원"이란 본 약관에 동의하고 서비스에 가입한 자를 의미합니다.</p>

                <h3>제3조 (약관의 효력 및 변경)</h3>
                <p>1. 본 약관은 서비스 화면에 게시하거나 기타의 방법으로 회원에게 공지함으로써 효력이 발생합니다.</p>
                <p>2. 회사는 필요한 경우 관련 법령을 위배하지 않는 범위에서 본 약관을 변경할 수 있습니다.</p>

                <h3>제4조 (서비스의 제공)</h3>
                <p>1. 회사는 회원에게 다양한 온라인 교육 콘텐츠를 제공합니다.</p>
                <p>2. 서비스는 연중무휴, 1일 24시간 제공함을 원칙으로 합니다.</p>

                <h3>제5조 (회원의 의무)</h3>
                <p>1. 회원은 본 약관 및 관련 법령을 준수하여야 합니다.</p>
                <p>2. 회원은 타인의 정보를 도용하거나 부정한 방법으로 서비스를 이용할 수 없습니다.</p>

                <h3>제6조 (면책조항)</h3>
                <p>회사는 천재지변, 전쟁, 기간통신사업자의 서비스 중지 등 불가항력적인 사유로 인한 서비스 중단에 대해서는 책임을 지지 않습니다.</p>
            </div>
        </div>
    </div>

    <!-- 개인정보처리방침 모달 -->
    <div id="privacy-policy-modal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>개인정보처리방침</h2>
                <span class="close" onclick="closeModal('privacy-policy-modal')">&times;</span>
            </div>
            <div class="modal-body" style="max-height: 500px; overflow-y: auto; padding: 20px; line-height: 1.6;">
                <h3>1. 개인정보의 처리 목적</h3>
                <p>회사는 다음의 목적을 위하여 개인정보를 처리합니다. 처리하고 있는 개인정보는 다음의 목적 이외의 용도로는 이용되지 않으며, 이용 목적이 변경되는 경우에는 별도의 동의를 받는 등 필요한 조치를 이행할 예정입니다.</p>
                <p>- 회원 가입 및 관리</p>
                <p>- 서비스 제공 및 계약의 이행</p>
                <p>- 민원 사무 처리</p>

                <h3>2. 개인정보의 처리 및 보유 기간</h3>
                <p>회사는 법령에 따른 개인정보 보유·이용기간 또는 정보주체로부터 개인정보를 수집 시에 동의받은 개인정보 보유·이용기간 내에서 개인정보를 처리·보유합니다.</p>

                <h3>3. 개인정보의 제3자 제공</h3>
                <p>회사는 정보주체의 개인정보를 제1조(개인정보의 처리 목적)에서 명시한 범위 내에서만 처리하며, 정보주체의 동의, 법률의 특별한 규정 등 개인정보 보호법 제17조에 해당하는 경우에만 개인정보를 제3자에게 제공합니다.</p>

                <h3>4. 정보주체의 권리·의무 및 행사방법</h3>
                <p>정보주체는 회사에 대해 언제든지 다음 각 호의 개인정보 보호 관련 권리를 행사할 수 있습니다.</p>
                <p>- 개인정보 열람요구</p>
                <p>- 오류 등이 있을 경우 정정 요구</p>
                <p>- 삭제요구</p>
                <p>- 처리정지 요구</p>

                <h3>5. 개인정보의 안전성 확보조치</h3>
                <p>회사는 개인정보의 안전성 확보를 위해 다음과 같은 조치를 취하고 있습니다.</p>
                <p>- 개인정보 취급 직원의 최소화 및 교육</p>
                <p>- 개인정보의 암호화</p>
                <p>- 해킹 등에 대비한 기술적 대책</p>
            </div>
        </div>
    </div>

    <!-- 개인정보 수집 및 이용 동의 모달 -->
    <div id="privacy-consent-modal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>개인정보 수집 및 이용 동의</h2>
                <span class="close" onclick="closeModal('privacy-consent-modal')">&times;</span>
            </div>
            <div class="modal-body" style="max-height: 500px; overflow-y: auto; padding: 20px; line-height: 1.6;">
                <h3>수집하는 개인정보 항목</h3>
                <p>회사는 회원가입 및 서비스 제공을 위해 다음과 같은 개인정보를 수집합니다.</p>
                <ul style="margin-left: 20px;">
                    <li>필수항목: 이름, 이메일, 비밀번호, 휴대폰 번호, 시/도, 소속</li>
                    <li>선택항목: 없음</li>
                </ul>

                <h3>개인정보의 수집 및 이용 목적</h3>
                <ul style="margin-left: 20px;">
                    <li>회원 가입 의사 확인, 회원제 서비스 제공, 본인 식별·인증</li>
                    <li>서비스 제공 및 계약의 이행</li>
                    <li>수강 관리 및 학습 지원</li>
                    <li>공지사항 전달, 불만처리 등을 위한 원활한 의사소통 경로의 확보</li>
                    <li>신규 서비스 개발 및 마케팅·광고에의 활용</li>
                </ul>

                <h3>개인정보의 보유 및 이용 기간</h3>
                <p>회원 탈퇴 시까지 보유하며, 관계 법령에 따라 일정 기간 보관이 필요한 경우에는 해당 기간 동안 보관합니다.</p>
                <ul style="margin-left: 20px;">
                    <li>계약 또는 청약철회 등에 관한 기록: 5년 (전자상거래 등에서의 소비자 보호에 관한 법률)</li>
                    <li>대금결제 및 재화 등의 공급에 관한 기록: 5년 (전자상거래 등에서의 소비자 보호에 관한 법률)</li>
                    <li>소비자의 불만 또는 분쟁처리에 관한 기록: 3년 (전자상거래 등에서의 소비자 보호에 관한 법률)</li>
                </ul>

                <h3>동의 거부 권리 및 불이익</h3>
                <p>회원은 개인정보 수집 및 이용에 대한 동의를 거부할 권리가 있습니다. 다만, 필수항목에 대한 동의를 거부할 경우 회원가입 및 서비스 이용이 제한될 수 있습니다.</p>
            </div>
        </div>
    </div>

    <!-- 강좌 상세 모달 -->
    <div id="course-detail-modal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2 id="course-title">강좌 제목</h2>
                <span class="close" onclick="closeModal('course-detail-modal')">&times;</span>
            </div>
            <div class="course-detail-content">
                <div class="course-info">
                    <div class="course-image">
                        <div class="placeholder-image">
                            <span>강좌 썸네일</span>
                        </div>
                    </div>
                    <div class="course-meta">
                        <div class="course-instructor">
                            <strong>강사:</strong> <span id="course-instructor">강사명</span>
                        </div>
                        <div class="course-duration">
                            <strong>수강 기간:</strong> <span id="course-duration">기간</span>
                        </div>
                        <div class="course-level">
                            <strong>난이도:</strong> <span id="course-level">난이도</span>
                        </div>
                    </div>
                </div>
                <div class="course-description">
                    <h3>강좌 소개</h3>
                    <p id="course-description-text">강좌 설명이 여기에 표시됩니다.</p>
                </div>
                <div class="course-curriculum">
                    <h3>커리큘럼</h3>
                    <ul id="course-curriculum-list">
                        <!-- 커리큘럼 항목들이 동적으로 생성됩니다 -->
                    </ul>
                </div>
                <div class="course-actions">
                    <button class="btn btn-primary btn-large" onclick="enrollCourse()">수강 신청</button>
                    <button class="btn btn-outline" onclick="addToWishlist()">찜하기</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 수강신청 확인 모달 -->
    <div id="enrollment-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>수강신청 확인</h2>
                <span class="close" onclick="closeModal('enrollment-modal')">&times;</span>
            </div>
            <div class="enrollment-content">
                <div class="enrollment-summary">
                    <h3>신청 강좌</h3>
                    <div class="selected-course">
                        <h4 id="enrollment-course-title">강좌명</h4>
                        <p><strong>강사:</strong> <span id="enrollment-instructor">강사명</span></p>
                        <p class="free-course-badge" style="color: #28a745; font-weight: bold; font-size: 1.1em; margin-top: 10px;">🎓 무료 강좌</p>
                    </div>
                </div>
                <form class="enrollment-form">
                    <div class="form-group checkbox-group">
                        <label>
                            <input type="checkbox" required>
                            <span class="checkmark"></span>
                            수강 약관에 동의합니다.
                        </label>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">수강 신청하기</button>
                </form>
            </div>
        </div>
    </div>

    <!-- 푸터 -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>EduPlatform</h3>
                    <p>최고 품질의 온라인 교육을 제공합니다.</p>
                </div>
                <div class="footer-section">
                    <h4>빠른 링크</h4>
                    <ul>
                        <li><a href="#home">홈</a></li>
                        <li><a href="#courses">강좌</a></li>
                        <li><a href="#contact">문의</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>고객 지원</h4>
                    <ul>
                        <li><a href="#">자주 묻는 질문</a></li>
                        <li><a href="#">이용약관</a></li>
                        <li><a href="#">개인정보처리방침</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>연락처</h4>
                    <p>이메일: <span class="contact-email">info@eduplatform.com</span></p>
                    <p>전화: <span class="contact-phone">02-1234-5678</span></p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 <span class="site-title">EduPlatform</span>. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- 전역 오류 핸들러 (가장 먼저 로드) -->
    <script src="error-handler.js?v=2024120310"></script>

    <!-- 유틸리티 -->
    <script src="validation-utils.js?v=2024120310"></script>
    <script src="loading-indicator.js?v=2024120310"></script>
    <script src="url-sanitizer.js?v=2024120310"></script>
    <script src="rate-limiter.js?v=2024120310"></script>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-analytics-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-check-compat.js"></script>

    <!-- Firebase 설정 -->
    <script src="firebase-config.local.js?v=2024120310"></script>
    <script src="firebase-config.js?v=2024120310"></script>

    <!-- 암호화 유틸리티 -->
    <script src="crypto-utils.js?v=2024120310"></script>

    <!-- Firebase 서비스 레이어 -->
    <script src="firebase-service.js?v=2024120310"></script>

    <!-- Firebase App Check (CSRF 보호) -->
    <script src="firebase-app-check.js?v=2024120310"></script>

    <script src="lms-script.js?v=2024120310"></script>
</body>
</html>