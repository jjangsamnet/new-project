<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript 완전정복 - 학습하기</title>
    <link rel="stylesheet" href="course-learning-styles.css">
</head>
<body>
    <!-- 헤더 -->
    <header class="learning-header">
        <div class="header-content">
            <div class="course-info">
                <button class="back-btn" onclick="goBack()">←</button>
                <div class="course-title">
                    <h1>JavaScript 완전정복</h1>
                    <span class="instructor">강사: 김개발</span>
                </div>
            </div>
            <div class="header-actions">
                <div class="progress-info">
                    <span class="progress-text">진행률: <span id="overall-progress">0%</span></span>
                    <div class="progress-bar">
                        <div class="progress-fill" id="overall-progress-bar"></div>
                    </div>
                </div>
                <button class="settings-btn" onclick="toggleSettings()">⚙️</button>
                <div class="user-info">
                    <span id="user-name-display">사용자</span>
                    <button class="logout-btn" onclick="logout()">로그아웃</button>
                </div>
            </div>
        </div>
    </header>

    <!-- 메인 학습 영역 -->
    <main class="learning-main">
        <!-- 사이드바 (강의 목록) -->
        <aside class="lessons-sidebar" id="lessons-sidebar">
            <div class="sidebar-header">
                <h3>강의 목록</h3>
                <button class="sidebar-toggle" onclick="toggleSidebar()">📋</button>
            </div>
            <div class="lessons-list" id="lessons-list">
                <!-- 강의 목록이 동적으로 생성됩니다 -->
            </div>
        </aside>

        <!-- 학습 콘텐츠 영역 -->
        <section class="learning-content">
            <!-- 비디오 플레이어 -->
            <div class="video-container">
                <div class="video-player" id="video-player">
                    <div class="video-placeholder" id="video-placeholder">
                        <div class="play-button" onclick="startLesson()">
                            ▶️
                        </div>
                        <p>강의를 시작하려면 재생 버튼을 클릭하세요</p>
                    </div>
                    <video id="lesson-video" controls style="display: none;">
                        <source src="" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                </div>

                <!-- 비디오 컨트롤 -->
                <div class="video-controls">
                    <div class="playback-controls">
                        <button class="control-btn" onclick="previousLesson()">⏮️</button>
                        <button class="control-btn" id="play-pause-btn" onclick="togglePlayPause()">▶️</button>
                        <button class="control-btn" onclick="nextLesson()">⏭️</button>
                    </div>
                </div>
            </div>

            <!-- 현재 강의 정보 -->
            <div class="current-lesson-info">
                <div class="lesson-header">
                    <h2 id="current-lesson-title">강의를 선택해주세요</h2>
                    <div class="lesson-progress">
                        <span id="lesson-time">00:00 / 00:00</span>
                        <div class="lesson-progress-bar">
                            <div class="lesson-progress-fill" id="lesson-progress-fill"></div>
                        </div>
                    </div>
                </div>
                <div class="lesson-description" id="lesson-description">
                    강의 목록에서 학습하고 싶은 강의를 선택하세요.
                </div>
            </div>

            <!-- 강의 컨트롤 영역 -->
            <div class="lesson-controls">
                <div class="control-group">
                    <button class="completion-btn" id="mark-complete-btn" onclick="markLessonComplete()">
                        <span class="btn-icon">✓</span>
                        <span class="btn-text">수강 완료</span>
                    </button>
                </div>
            </div>

            <!-- 학습 자료 -->
            <div class="learning-materials">
                <div class="materials-tabs">
                    <button class="tab-btn active" onclick="showTab('notes')">강의 노트</button>
                    <button class="tab-btn" onclick="showTab('resources')">학습 자료</button>
                    <button class="tab-btn" onclick="showTab('discussion')">질문과 답변</button>
                </div>

                <div class="tab-content">
                    <!-- 강의 노트 -->
                    <div class="tab-panel active" id="notes-panel">
                        <div class="notes-section">
                            <h4>강의 노트</h4>
                            <div class="notes-content" id="notes-content">
                                <p>강의를 선택하면 해당 강의의 노트가 표시됩니다.</p>
                            </div>
                            <div class="my-notes">
                                <h5>나의 메모</h5>
                                <textarea id="my-notes-textarea" placeholder="강의를 들으며 메모를 작성해보세요..."></textarea>
                                <button class="save-notes-btn" onclick="saveNotes()">메모 저장</button>
                            </div>
                        </div>
                    </div>

                    <!-- 학습 자료 -->
                    <div class="tab-panel" id="resources-panel">
                        <div class="resources-section">
                            <h4>학습 자료</h4>
                            <div class="resources-list" id="resources-list">
                                <div class="resource-item">
                                    <span class="resource-icon">📄</span>
                                    <span class="resource-name">JavaScript 기본 문법 정리.pdf</span>
                                    <button class="download-btn">다운로드</button>
                                </div>
                                <div class="resource-item">
                                    <span class="resource-icon">💻</span>
                                    <span class="resource-name">실습 예제 코드</span>
                                    <button class="download-btn">다운로드</button>
                                </div>
                                <div class="resource-item">
                                    <span class="resource-icon">🔗</span>
                                    <span class="resource-name">MDN JavaScript 문서</span>
                                    <button class="download-btn">링크 이동</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 질문과 답변 -->
                    <div class="tab-panel" id="discussion-panel">
                        <div class="discussion-section">
                            <h4>질문과 답변</h4>
                            <div class="question-form">
                                <textarea placeholder="강의에 대해 궁금한 점을 질문해보세요..."></textarea>
                                <button class="ask-btn">질문하기</button>
                            </div>
                            <div class="questions-list" id="questions-list">
                                <div class="question-item">
                                    <div class="question-content">
                                        <h5>변수 선언 방법에 대해 질문이 있습니다</h5>
                                        <p>let과 const의 차이점을 좀 더 자세히 설명해주실 수 있나요?</p>
                                        <div class="question-meta">
                                            <span>김학생</span> • <span>2일 전</span>
                                        </div>
                                    </div>
                                    <div class="answer">
                                        <p><strong>강사 답변:</strong> let은 재할당이 가능하고, const는 재할당이 불가능합니다...</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- 완료 모달 -->
    <div id="completion-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>🎉 강의 완료!</h2>
            </div>
            <div class="completion-content">
                <p><strong id="completed-lesson-title">강의명</strong>을 완료했습니다!</p>
                <div class="completion-actions">
                    <button class="btn btn-primary" onclick="nextLesson()">다음 강의</button>
                    <button class="btn btn-outline" onclick="closeCompletionModal()">계속 시청</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 설정 패널 -->
    <div id="settings-panel" class="settings-panel">
        <div class="settings-content">
            <h3>학습 설정</h3>
            <div class="setting-item">
                <label>자동 재생</label>
                <input type="checkbox" id="auto-play" checked>
            </div>
            <div class="setting-item">
                <label>자동 다음 강의</label>
                <input type="checkbox" id="auto-next" checked>
            </div>
            <div class="setting-item">
                <label>동영상 화질</label>
                <select id="video-quality">
                    <option value="auto">자동</option>
                    <option value="720p">720p</option>
                    <option value="480p">480p</option>
                    <option value="360p">360p</option>
                </select>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>

    <!-- Firebase 설정 -->
    <script src="firebase-config.js"></script>
    <!-- 로컬 Firebase 설정 (존재하는 경우) -->
    <!-- <script src="firebase-config.local.js" onerror="console.log('로컬 Firebase 설정 파일이 없습니다.')"></script> -->
    <script src="firebase-service.js"></script>

    <!-- 학습 페이지 스크립트 -->
    <script src="course-learning-script.js?v=2024120316"></script>
</body>
</html>